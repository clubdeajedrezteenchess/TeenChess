<!DOCTYPE html>
<!--
  galeria.html — Nueva versión (diseño: tarjetas cuadradas con overlay)
  - Reutiliza header/footer y estilos globales (estilos.css)
  - Añade estilos propios en /css/galeria.css
  - Funcionalidades:
      * Filtros por categoría (chips)
      * Grid responsivo de tarjetas cuadradas
      * Overlay con título + categoría en hover (o siempre en móvil)
      * Lightbox accesible con prev/next + teclado
-->
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Teen Chess — Galería</title>
  <meta name="description" content="Galería — Teen Chess. Tarjetas cuadradas con overlay y lightbox." />

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Merriweather:wght@700;900&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="/css/estilos.css" />
  <link rel="stylesheet" href="/css/galeria.css" />
</head>
<body>
  <!-- HEADER (reutilizado) -->
  <header class="site-header" role="banner">
    <div class="wrap header-row">
      <a class="brand" href="/index.html" aria-label="Teen Chess — Inicio">
        <img src="/img/logo.png" alt="Teen Chess logo" class="brand-logo" onerror="this.style.display='none'"/>
        <span class="brand-name">Teen Chess</span>
      </a>

      <nav class="main-nav" role="navigation" aria-label="Menú principal">
        <ul>
          <li><a href="index.html">INICIO</a></li>
          <li><a href="/html/about.html">NOTICIAS</a></li>
          <li><a href="/html/eventos.html">EVENTOS</a></li>
          <li><a href="/html/formación.html">FORMACIÓN</a></li>
          <li><a href="/html/galeria.html" aria-current="page">GALERÍA</a></li>
          <li><a href="/html/contacto.html">CONTACTO</a></li>
        </ul>
      </nav>

      <div class="actions">
        <a class="btn join" href="/html/contacto.html">Únete</a>
        <button id="menu-btn" class="hamburger" aria-expanded="false" aria-controls="mobile-menu" aria-label="Abrir menú">
          <span></span><span></span><span></span>
        </button>
      </div>
    </div>

    <!-- MOBILE MENU -->
    <div id="mobile-menu" class="mobile-menu" hidden aria-hidden="true">
      <div class="mobile-inner wrap">
        <nav role="navigation" aria-label="Menú móvil">
          <ul>
            <li><a href="index.html">INICIO</a></li>
            <li><a href="/html/about.html">NOTICIAS</a></li>
            <li><a href="/html/eventos.html">EVENTOS</a></li>
            <li><a href="/html/formación.html">FORMACIÓN</a></li>
            <li><a href="/html/galeria.html">GALERÍA</a></li>
            <li><a href="/html/contacto.html">CONTACTO</a></li>
          </ul>
        </nav>
      </div>
    </div>
  </header>

  <!-- HERO -->
  <section class="hero" aria-labelledby="gallery-title" style="background-image: url('/imagenes/hero-gallery.jpg')">
    <div class="overlay"></div>
    <div class="hero-inner wrap">
      <div class="hero-left">
        <h1 id="gallery-title">Galería — <span class="accent">Momentos Teen Chess</span></h1>
        <p class="lead">Vista limpia y ordenada. Filtra por categoría y abre las imágenes en grande.</p>
      </div>
    </div>
  </section>

  <!-- MAIN -->
  <main id="main" class="wrap main-grid" role="main">
    <div class="content-col">
      <section class="section gallery-clean" aria-labelledby="gallery-clean-title">
        <header class="section-head">
          <h2 id="gallery-clean-title">Colección</h2>
          <p class="muted">Diseño de tarjetas cuadradas con overlay. Perfecto para una apariencia más uniforme.</p>
        </header>

        <!-- filtros tipo 'chips' -->
        <div class="gallery-controls card">
          <div class="chips" role="toolbar" aria-label="Filtros de galería">
            <button class="chip active" data-filter="all">Todas</button>
            <button class="chip" data-filter="torneos">Torneos</button>
            <button class="chip" data-filter="clases">Clases</button>
            <button class="chip" data-filter="retratos">Retratos</button>
          </div>
          <div class="search-wrap">
            <input id="gallery-search" type="search" placeholder="Buscar título..." aria-label="Buscar en galería" />
          </div>
        </div>

        <!-- grid cuadrado -->
        <div id="clean-grid" class="clean-grid" aria-live="polite">
          <!-- plantilla de tarjeta:
               data-category (filtrado), data-title, data-desc, y la img real
          -->
          <figure class="tile" data-category="torneos" data-title="Campeonato Juvenil" data-desc="Partida final - 3 Ago 2025">
            <button class="tile-btn" aria-label="Abrir: Campeonato Juvenil">
              <img src="/img/mateo.jpg" alt="Campeonato Juvenil" loading="lazy" />
              <div class="overlay-content">
                <div class="overlay-title">Campeonato Juvenil</div>
                <div class="overlay-sub">Torneo</div>
              </div>
            </button>
          </figure>

          <figure class="tile" data-category="clases" data-title="Clase intensiva" data-desc="Tácticas - Julio 2025">
            <button class="tile-btn" aria-label="Abrir: Clase intensiva">
              <img src="/img/rv.jpg" alt="Clase intensiva" loading="lazy" />
              <div class="overlay-content">
                <div class="overlay-title">Clase intensiva</div>
                <div class="overlay-sub">Clases</div>
              </div>
            </button>
          </figure>

          <figure class="tile" data-category="retratos" data-title="Entrenador Ricardo" data-desc="Coach principal">
            <button class="tile-btn" aria-label="Abrir: Entrenador Ricardo">
              <img src="/img/campeon.jpg" alt="Entrenador Ricardo" loading="lazy" />
              <div class="overlay-content">
                <div class="overlay-title">Entrenador Ricardo</div>
                <div class="overlay-sub">Retrato</div>
              </div>
            </button>
          </figure>

          <figure class="tile" data-category="torneos" data-title="Finales esenciales" data-desc="Torneo interno">
            <button class="tile-btn" aria-label="Abrir: Finales esenciales">
              <img src="/img/todos.jpg" alt="Finales esenciales" loading="lazy" />
              <div class="overlay-content">
                <div class="overlay-title">Finales esenciales</div>
                <div class="overlay-sub">Torneo</div>
              </div>
            </button>
          </figure>

          <figure class="tile" data-category="clases" data-title="Entrenamiento" data-desc="Sesión práctica">
            <button class="tile-btn" aria-label="Abrir: Entrenamiento">
              <img src="/img/entrenamiento.jpg" alt="Entrenamiento" loading="lazy" />
              <div class="overlay-content">
                <div class="overlay-title">Entrenamiento</div>
                <div class="overlay-sub">Clases</div>
              </div>
            </button>
          </figure>

          <figure class="tile" data-category="retratos" data-title="Jugador destacado" data-desc="Mateo Tello">
            <button class="tile-btn" aria-label="Abrir: Jugador destacado">
              <img src="/img/equipo.jpg" alt="Jugador destacado" loading="lazy" />
              <div class="overlay-content">
                <div class="overlay-title">Jugador destacado</div>
                <div class="overlay-sub">Retrato</div>
              </div>
            </button>
          </figure>

          <!-- añade más tarjetas conservando el patrón -->
        </div>
      </section>
    </div>

    <!-- sidebar compacto -->
    <aside class="sidebar-col" aria-label="Barra lateral galería">
      <div class="sidebar-widget card">
        <h4 class="widget-title">Compartir</h4>
        <p class="muted">¿Tienes fotos? Envíalas por WhatsApp y las publicamos.</p>
        <a class="btn ghost block" href="https://wa.me/51929005460" target="_blank" rel="noopener">Enviar fotos</a>
      </div>
    </aside>
  </main>

  <!-- LIGHTBOX SIMPLE -->
  <div id="clean-lightbox" class="clean-lightbox" aria-hidden="true" role="dialog" aria-label="Visor de imagen" tabindex="-1">
    <button id="clb-close" class="clb-close" aria-label="Cerrar">✕</button>
    <button id="clb-prev" class="clb-nav clb-prev" aria-label="Anterior">‹</button>
    <div class="clb-inner">
      <img id="clb-img" alt="" />
      <div class="clb-meta">
        <h3 id="clb-title"></h3>
        <p id="clb-desc" class="muted"></p>
      </div>
    </div>
    <button id="clb-next" class="clb-nav clb-next" aria-label="Siguiente">›</button>
  </div>

  <!-- FOOTER -->
  <footer class="site-footer" role="contentinfo">
    <div class="footer-compact wrap">
      <div class="footer-top-compact">
        <div class="brand-area-compact">
          <img src="" alt="Teen Chess logo" class="brand-badge small" onerror="this.style.display='none'"/>
          <div>
            <strong>Teen Chess</strong>
            <p class="muted small">Club juvenil de ajedrez — formación y competencia.</p>
          </div>
        </div>

        <nav class="footer-links-compact" aria-label="Enlaces pie">
          <a href="https://web.facebook.com/AjedrezenIquitos?locale=es_LA">Facebook</a>
          <a href="https://www.instagram.com/clubdeajedrezteenchess/">Instagram</a>
        </nav>
      </div>

      <div class="footer-bottom-compact">
        <small>© 2025 Teen Chess — Todos los derechos reservados.</small>
      </div>
    </div>
  </footer>

  <!-- SCRIPTS: filtros + búsq + lightbox + menú móvil -->
  <script>
    (function(){
      const chips = document.querySelectorAll('.chip');
      const tiles = Array.from(document.querySelectorAll('.tile'));
      const search = document.getElementById('gallery-search');

      function applyFilter(cat) {
        // active chip
        chips.forEach(c => c.classList.toggle('active', c.dataset.filter === cat));
        tiles.forEach(t => {
          const matchesCat = (cat === 'all') || (t.dataset.category === cat);
          const matchesSearch = !search.value.trim() || t.dataset.title.toLowerCase().includes(search.value.trim().toLowerCase());
          t.style.display = (matchesCat && matchesSearch) ? '' : 'none';
        });
      }

      chips.forEach(c => c.addEventListener('click', () => applyFilter(c.dataset.filter)));
      search.addEventListener('input', () => {
        const active = Array.from(chips).find(c=>c.classList.contains('active')) || chips[0];
        applyFilter(active.dataset.filter);
      });

      // LIGHTBOX
      const lb = document.getElementById('clean-lightbox');
      const lbImg = document.getElementById('clb-img');
      const lbTitle = document.getElementById('clb-title');
      const lbDesc = document.getElementById('clb-desc');
      const lbClose = document.getElementById('clb-close');
      const lbPrev = document.getElementById('clb-prev');
      const lbNext = document.getElementById('clb-next');

      function visibleTiles() {
        return tiles.filter(t => t.style.display !== 'none');
      }

      function openFor(tile) {
        const src = tile.querySelector('img').src;
        lbImg.src = src;
        lbImg.alt = tile.dataset.title || '';
        lbTitle.textContent = tile.dataset.title || '';
        lbDesc.textContent = tile.dataset.desc || '';
        lb.classList.add('open');
        lb.removeAttribute('aria-hidden');
        document.body.style.overflow = 'hidden';
        lb.focus();
      }

      function closeLB() {
        lb.classList.remove('open');
        lb.setAttribute('aria-hidden','true');
        document.body.style.overflow = '';
      }

      function showAdjacent(next = true) {
        const arr = visibleTiles();
        const currentSrc = lbImg.src;
        const idx = arr.findIndex(a => a.querySelector('img').src === currentSrc);
        if (idx === -1) return;
        const newIdx = next ? idx + 1 : idx - 1;
        if (newIdx < 0 || newIdx >= arr.length) return;
        openFor(arr[newIdx]);
      }

      tiles.forEach(t => {
        t.querySelector('.tile-btn').addEventListener('click', () => openFor(t));
      });

      lbClose.addEventListener('click', closeLB);
      lbPrev.addEventListener('click', () => showAdjacent(false));
      lbNext.addEventListener('click', () => showAdjacent(true));

      lb.addEventListener('click', (e) => { if (e.target === lb) closeLB(); });
      document.addEventListener('keydown', (e) => {
        if (!lb.classList.contains('open')) return;
        if (e.key === 'Escape') closeLB();
        if (e.key === 'ArrowLeft') showAdjacent(false);
        if (e.key === 'ArrowRight') showAdjacent(true);
      });

      // Inicial
      applyFilter('all');

    })();

    /* Mobile menu script (igual que en index) */
    (function () {
      const menuBtn = document.getElementById("menu-btn");
      const mobileMenu = document.getElementById("mobile-menu");

      function openMenu() {
        mobileMenu.classList.add("open");
        mobileMenu.removeAttribute("hidden");
        mobileMenu.setAttribute("aria-hidden", "false");
        menuBtn.setAttribute("aria-expanded", "true");
        document.body.style.overflow = "hidden";
      }
      function closeMenu() {
        mobileMenu.classList.remove("open");
        mobileMenu.setAttribute("aria-hidden", "true");
        menuBtn.setAttribute("aria-expanded", "false");
        setTimeout(()=> mobileMenu.setAttribute("hidden", ""), 220);
        document.body.style.overflow = "";
      }

      menuBtn && menuBtn.addEventListener('click', () => {
        const isOpen = mobileMenu.classList.toggle('open');
        if (isOpen) openMenu(); else closeMenu();
      });

      mobileMenu && mobileMenu.addEventListener('click', (e) => {
        if (e.target === mobileMenu) closeMenu();
      });

      document.addEventListener('keydown', (e) => {
        if (e.key === "Escape" && mobileMenu.classList.contains('open')) closeMenu();
      });
    })();
  </script>
</body>
</html>
