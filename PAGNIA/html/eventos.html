<!DOCTYPE html>
<!--
  eventos.html — Página de eventos (inspirada en calendar.fide.com)
  - Estructura: header (reutiliza header de index), hero, área principal con calendario + lista de eventos, sidebar con filtros/recursos.
  - Incluye JS que renderiza un calendario mensual interactivo y muestra los eventos del mes.
  - Usa variables y componentes de estilos.css; estilos específicos en /css/eventos.css
-->
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Teen Chess — Calendario de eventos</title>
    <meta
      name="description"
      content="Calendario de eventos: torneos, clases y actividades de Teen Chess."
    />

    <!-- Fuentes compartidas con el resto del sitio -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Merriweather:wght@700;900&display=swap"
      rel="stylesheet"
    />
    <!-- Hoja base -->
    <link rel="stylesheet" href="/css/estilos.css" />
    <!-- Estilos específicos para eventos -->
    <link rel="stylesheet" href="/css/eventos.css" />
  </head>
  <body>
    <!-- ================= HEADER (reutilizado) ================= -->
    <header class="site-header" role="banner">
      <div class="wrap header-row">
        <a class="brand" href="/index.html" aria-label="Teen Chess — Inicio">
          <img
            src="/img/logo.png"
            alt="Teen Chess logo"
            class="brand-logo"
            onerror="this.style.display='none'"
          />
          <span class="brand-name">Teen Chess</span>
        </a>

        <nav class="main-nav" role="navigation" aria-label="Menú principal">
          <ul>
            <li><a href="/index.html">INICIO</a></li>
            <li><a href="/html/about.html">NOTICIAS</a></li>
            <li>
              <a href="/html/eventos.html" aria-current="page">EVENTOS</a>
            </li>
            <li><a href="/html/formación.html">FORMACIÓN</a></li>
            <li><a href="/html/galeria.html">GALERÍA</a></li>
            <li><a href="/html/contacto.html">CONTACTO</a></li>
          </ul>
        </nav>

        <div class="actions">
          <a class="btn join" href="/html/contacto.html">Únete</a>
          <button
            id="menu-btn"
            class="hamburger"
            aria-expanded="false"
            aria-controls="mobile-menu"
            aria-label="Abrir menú"
          >
            <span></span><span></span><span></span>
          </button>
        </div>
      </div>

      <!-- MOBILE MENU (necesario para que el botón hamburguesa funcione) -->
      <div id="mobile-menu" class="mobile-menu" hidden aria-hidden="true">
        <div class="mobile-inner wrap">
          <nav role="navigation" aria-label="Menú móvil">
            <ul>
            <li><a href="index.html">INICIO</a></li>
            <li><a href="/html/about.html">NOTICIAS</a></li>
            <li><a href="/html/eventos.html">EVENTOS</a></li>
            <li><a href="/html/formación.html">FORMACIÓN</a></li>
            <li><a href="/html/galeria.html">GALERÍA</a></li>
            <li><a href="/html/contacto.html">CONTACTO</a></li>
            </ul>
          </nav>
        </div>
      </div>
    </header>

    <!-- ================= HERO ================= -->
    <section
      class="hero"
      aria-labelledby="events-hero-title"
      style="background-image: url('/imagenes/hero-events.jpg')"
    >
      <div class="overlay"></div>
      <div class="hero-inner wrap">
        <div class="hero-left">
          <h1 id="events-hero-title">
            Calendario de eventos — <span class="accent">Teen Chess</span>
          </h1>
          <p class="lead">
            Torneos, clases y actividades. Usa el calendario para navegar por
            fechas y ver los detalles de cada evento.
          </p>
        </div>

        <aside class="hero-card" aria-hidden="true">
          <div class="card highlight">
            <div class="card-body">
              <strong>Próximo torneo:</strong>
              <p class="muted small">Sin Fecha</p>
              <a class="btn ghost small" href="#event-1">Ver detalles</a>
            </div>
          </div>
        </aside>
      </div>
    </section>

    <!-- ================= MAIN (calendario + lista) ================= -->
    <main id="main" class="wrap main-grid" role="main">
      <!-- CONTENIDO PRINCIPAL -->
      <div class="content-col">
        <section
          class="section calendar-section"
          aria-labelledby="calendar-title"
        >
          <header class="section-head">
            <h2 id="calendar-title">Calendario</h2>
            <p class="muted">
              Navega por mes y haz clic en un día para ver los eventos
              programados.
            </p>
          </header>

          <!-- Calendario: selector de mes + grid -->
          <div class="calendar-wrap card">
            <div class="calendar-header">
              <button
                id="prev-month"
                class="btn ghost small"
                aria-label="Mes anterior"
              >
                ‹
              </button>
              <div
                id="current-month"
                class="current-month"
                aria-live="polite"
              ></div>
              <button
                id="next-month"
                class="btn ghost small"
                aria-label="Mes siguiente"
              >
                ›
              </button>
              <div class="calendar-actions">
                <label for="view-select" class="muted small">Ver:</label>
                <select id="view-select" aria-label="Vista calendario">
                  <option value="month" selected>Mensual</option>
                  <option value="list">Lista</option>
                </select>
              </div>
            </div>

            <div
              id="calendar-grid"
              class="calendar-grid"
              role="grid"
              aria-label="Días del mes"
            >
              <!-- JS renderiza las celdas aquí -->
            </div>
          </div>

          <!-- Lista de eventos del día/mes -->
          <div id="events-list" class="events-list card">
            <header class="events-list-head">
              <h3 id="events-for">Eventos próximos</h3>
            </header>
            <ul id="events-items" class="events-items">
              <!-- JS inyecta items aquí -->
            </ul>
          </div>
        </section>
      </div>

      <!-- SIDEBAR -->
      <aside class="sidebar-col" aria-label="Barra lateral eventos">
        <!-- Filtro rápido por tipo -->
        <div class="sidebar-widget card filters">
          <h4 class="widget-title">Filtrar eventos</h4>
          <form id="filters-form" action="#" onsubmit="return false;">
            <label
              ><input type="checkbox" name="type" value="torneo" checked />
              Torneos</label
            ><br />
            <label
              ><input type="checkbox" name="type" value="clase" checked />
              Clases</label
            ><br />
            <label
              ><input type="checkbox" name="type" value="taller" checked />
              Talleres</label
            ><br />
            <label
              ><input type="checkbox" name="type" value="otro" checked />
              Otros</label
            >
          </form>
        </div>

        <!-- Widget resumen / CTA -->
        <div class="sidebar-widget card subscribe">
          <h4 class="widget-title">Suscríbete al calendario</h4>
          <p class="muted">
            Recibe recordatorios y novedades sobre torneos y clases.
          </p>
          <a
            class="btn join block"
            href="https://wa.me/51929005460"
            target="_blank"
            rel="noopener"
            >Suscribirme</a
          >
        </div>

        <!-- Recursos rápidos -->
        <div class="sidebar-widget card resources">
          <h4 class="widget-title">Recursos</h4>
          <ul>
            <li><a href="https://www.fide.com/">FIDE</a></li>
            <li><a href="https://lichess.org/">Lichess</a></li>
            <li><a href="/eventos.html">Ver calendario completo</a></li>
          </ul>
        </div>
      </aside>
    </main>

    <!-- ================= FOOTER ================= -->
    <footer class="site-footer" role="contentinfo">
      <div class="footer-compact wrap">
        <div class="footer-top-compact">
          <div class="brand-area-compact">
            <img
              src=""
              alt="Teen Chess logo"
              class="brand-badge small"
              onerror="this.style.display='none'"
            />
            <div>
              <strong>Teen Chess</strong>
              <p class="muted small">
                Club juvenil de ajedrez — formación y competencia.
              </p>
            </div>
          </div>

          <nav class="footer-links-compact" aria-label="Enlaces pie">
            <a href="https://web.facebook.com/AjedrezenIquitos?locale=es_LA"
              >Facebook</a
            >
            <a href="https://www.instagram.com/clubdeajedrezteenchess/"
              >Instagram</a
            >
            <a href="https://www.fide.com/">FIDE</a>
          </nav>
        </div>

        <div class="footer-bottom-compact">
          <small>© 2025 Teen Chess — Todos los derechos reservados.</small>
        </div>
      </div>
    </footer>

    <!-- ================= SCRIPTS ================= -->
    <script>
      /* 
    Eventos de ejemplo — basados en los eventos que aparecen en index.html.
    - date: formato ISO (YYYY-MM-DD). 
    - Puedes añadir más eventos o cargarlos desde un JSON/endpoint.
  */
      const EVENTS = [
        {
          id: "event-1",
          title: "Clases Intensivas",
          date: "2025-08-26",
          type: "clase",
          time: "16:00",
          location: "Club Teen Chess - Sede Central",
          excerpt: "Intensivas para niveles básico e intermedio",
          image: "/img/entrenamiento.jpg",
          url: "https://web.facebook.com/share/p/1B7iG72qqs/",
        },
      ];

      /* ---------- Calendar rendering logic (simple, robust) ---------- */

      // Estado actual del calendario
      let current = new Date(); // inicialmente mes actual

      function getEventsForDate(isoDate, filters = null) {
        return EVENTS.filter((ev) => ev.date === isoDate).filter((ev) => {
          if (!filters) return true;
          return filters.includes(ev.type);
        });
      }

      function getEventsForMonth(year, month, filters = null) {
        // month: 0-indexado
        return EVENTS.filter((ev) => {
          const d = new Date(ev.date + "T00:00");
          return (
            d.getFullYear() === year &&
            d.getMonth() === month &&
            (!filters || filters.includes(ev.type))
          );
        });
      }

      // Obtiene filtros activos desde checkboxes
      function getActiveFilters() {
        const checked = Array.from(
          document.querySelectorAll('#filters-form input[name="type"]:checked')
        ).map((i) => i.value);
        return checked;
      }

      function renderMonth(date) {
        const grid = document.getElementById("calendar-grid");
        grid.innerHTML = ""; // limpiar
        const year = date.getFullYear();
        const month = date.getMonth();

        // Título mes (en español)
        const monthFormatter = new Intl.DateTimeFormat("es-ES", {
          month: "long",
          year: "numeric",
        });
        document.getElementById("current-month").textContent =
          monthFormatter.format(date);

        // Primer día del mes y cuántos días tiene
        const first = new Date(year, month, 1);
        const last = new Date(year, month + 1, 0);
        const daysInMonth = last.getDate();

        // Día de la semana del primer día (0=Domingo). Queremos empezar la semana LUNES (opcional)
        // Para alinearlo con disposición de FIDE (Lun..Dom) transformamos índice:
        const startWeekDay = (first.getDay() + 6) % 7; // 0 = Lunes, 6 = Domingo

        // Dibujar encabezado (mon..sun)
        const daysHeader = ["Lun", "Mar", "Mié", "Jue", "Vie", "Sáb", "Dom"];
        daysHeader.forEach((d) => {
          const th = document.createElement("div");
          th.className = "calendar-cell calendar-cell-header";
          th.textContent = d;
          grid.appendChild(th);
        });

        // Añadir celdas de relleno hasta startWeekDay
        for (let i = 0; i < startWeekDay; i++) {
          const empty = document.createElement("div");
          empty.className = "calendar-cell empty";
          grid.appendChild(empty);
        }

        // Renderizar días
        const activeFilters = getActiveFilters();
        for (let day = 1; day <= daysInMonth; day++) {
          const iso = new Date(year, month, day).toISOString().slice(0, 10);
          const cell = document.createElement("button");
          cell.className = "calendar-cell day";
          cell.setAttribute("data-date", iso);
          cell.setAttribute("role", "gridcell");
          cell.innerHTML = `<span class="day-number">${day}</span>`;

          // marcar si hay eventos
          const events = getEventsForDate(iso, activeFilters);
          if (events.length) {
            const marker = document.createElement("div");
            marker.className = "day-markers";
            // crear pequeño punto por evento (máx 3)
            events.slice(0, 3).forEach(() => {
              const dot = document.createElement("span");
              dot.className = "dot";
              marker.appendChild(dot);
            });
            cell.appendChild(marker);
            cell.classList.add("has-events");
          }

          // click: mostrar lista para esa fecha
          cell.addEventListener("click", () => {
            renderEventsForDate(iso);
          });

          grid.appendChild(cell);
        }

        // Si la última fila no completa 7 columnas, rellenar para mantener grid
        const totalCells = grid.children.length;
        const remainder = totalCells % 7;
        if (remainder !== 0) {
          const toAdd = 7 - remainder;
          for (let i = 0; i < toAdd; i++) {
            const empty = document.createElement("div");
            empty.className = "calendar-cell empty";
            grid.appendChild(empty);
          }
        }
      }

      function renderEventsForDate(isoDate) {
        const items = document.getElementById("events-items");
        items.innerHTML = ""; // limpiar
        const filters = getActiveFilters();
        const events = getEventsForDate(isoDate, filters);

        // Título del panel
        const heading = document.getElementById("events-for");
        const dateFormatter = new Intl.DateTimeFormat("es-ES", {
          weekday: "long",
          year: "numeric",
          month: "long",
          day: "numeric",
        });
        heading.textContent = events.length
          ? `Eventos para ${dateFormatter.format(new Date(isoDate))}`
          : `No hay eventos para ${dateFormatter.format(new Date(isoDate))}`;

        if (!events.length) return;

        events.forEach((ev) => {
          const li = document.createElement("li");
          li.className = "events-item";
          li.id = ev.id;
          li.innerHTML = `
        <article class="event-card">
          <img class="event-thumb" src="${ev.image}" alt="${ev.title}" loading="lazy" />
          <div class="event-body">
            <h4 class="event-title"><a href="${ev.url}">${ev.title}</a></h4>
            <div class="meta muted">${ev.time} · ${ev.location} · <strong class="type">${ev.type}</strong></div>
            <p class="excerpt">${ev.excerpt}</p>
            <div class="event-actions">
              <a class="btn ghost small" href="${ev.url}">Ver detalles</a>
              <a class="btn ghost small" href="#">Añadir a mi calendario</a>
            </div>
          </div>
        </article>
      `;
          items.appendChild(li);
        });
      }

      function renderEventsForMonth(date) {
        const items = document.getElementById("events-items");
        items.innerHTML = ""; // limpiar
        const filters = getActiveFilters();
        const monthEvents = getEventsForMonth(
          date.getFullYear(),
          date.getMonth(),
          filters
        );
        const heading = document.getElementById("events-for");
        const monthFormatter = new Intl.DateTimeFormat("es-ES", {
          month: "long",
          year: "numeric",
        });
        heading.textContent = monthEvents.length
          ? `Eventos en ${monthFormatter.format(date)}`
          : `No hay eventos en ${monthFormatter.format(date)}`;

        if (!monthEvents.length) return;

        monthEvents.forEach((ev) => {
          const li = document.createElement("li");
          li.className = "events-item";
          li.innerHTML = `
        <article class="event-card">
          <img class="event-thumb" src="${ev.image}" alt="${ev.title}" loading="lazy" />
          <div class="event-body">
            <h4 class="event-title"><a href="${ev.url}">${ev.title}</a></h4>
            <div class="meta muted">${ev.date} · ${ev.time} · ${ev.location} · <strong class="type">${ev.type}</strong></div>
            <p class="excerpt">${ev.excerpt}</p>
            <div class="event-actions">
              <a class="btn ghost small" href="${ev.url}">Ver detalles</a>
            </div>
          </div>
        </article>
      `;
          items.appendChild(li);
        });
      }

      // Inicialización y eventos UI
      document.addEventListener("DOMContentLoaded", () => {
        const viewSelect = document.getElementById("view-select");
        const prevBtn = document.getElementById("prev-month");
        const nextBtn = document.getElementById("next-month");

        // render inicial
        renderMonth(current);
        renderEventsForMonth(current);

        // Navegación meses
        prevBtn.addEventListener("click", () => {
          current = new Date(current.getFullYear(), current.getMonth() - 1, 1);
          renderMonth(current);
          renderEventsForMonth(current);
        });
        nextBtn.addEventListener("click", () => {
          current = new Date(current.getFullYear(), current.getMonth() + 1, 1);
          renderMonth(current);
          renderEventsForMonth(current);
        });

        // Cambiar vista (mes / lista)
        viewSelect.addEventListener("change", (e) => {
          if (e.target.value === "list") {
            // mostrar lista de eventos del mes
            renderEventsForMonth(current);
          } else {
            // volver al calendario
            renderMonth(current);
            document.getElementById("events-items").innerHTML = "";
            document.getElementById("events-for").textContent =
              "Eventos próximos";
          }
        });

        // reactiva la visualización cuando cambian filtros
        document
          .getElementById("filters-form")
          .addEventListener("change", () => {
            renderMonth(current);
            // si la vista es lista, refrescar lista de mes
            if (viewSelect.value === "list") renderEventsForMonth(current);
            else document.getElementById("events-items").innerHTML = "";
          });
      });

      /* ---------- Mobile menu script (misma funcionalidad que index.html) ---------- */
      (function () {
        const menuBtn = document.getElementById("menu-btn");
        const mobileMenu = document.getElementById("mobile-menu");

        function openMenu() {
          mobileMenu.classList.add("open");
          mobileMenu.removeAttribute("hidden");
          mobileMenu.setAttribute("aria-hidden", "false");
          menuBtn.setAttribute("aria-expanded", "true");
          document.body.style.overflow = "hidden";
        }
        function closeMenu() {
          mobileMenu.classList.remove("open");
          mobileMenu.setAttribute("aria-hidden", "true");
          menuBtn.setAttribute("aria-expanded", "false");
          setTimeout(() => mobileMenu.setAttribute("hidden", ""), 220);
          document.body.style.overflow = "";
        }

        menuBtn &&
          menuBtn.addEventListener("click", () => {
            const isOpen = mobileMenu.classList.toggle("open");
            if (isOpen) openMenu();
            else closeMenu();
          });

        mobileMenu &&
          mobileMenu.addEventListener("click", (e) => {
            if (e.target === mobileMenu) closeMenu();
          });

        document.addEventListener("keydown", (e) => {
          if (e.key === "Escape" && mobileMenu.classList.contains("open"))
            closeMenu();
        });
      })();
    </script>
  </body>
</html>
